#!/bin/sh
#
# cğŸ’¯t -- convert .c and .h files to .cğŸ’¯ and .hğŸ’¯
# Copyright (C) 2023 Jorge Fabregat LÃ³pez
# This program is free software: you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation, either version 3 of the License, or
# (at your option) any later version.
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
# You should have received a copy of the GNU General Public License
# along with this program.  If not, see <https://www.gnu.org/licenses/>.

# Process arguments ğŸ§
if [ "$1" = "-h" ] || [ "$1" = "--help" ] || [ "$#" = "0" ]
then
  echo "Usage: $(basename "$0") file ..."
  exit 0
fi

# Define the CğŸ’¯ Translation Table ğŸ”¥
sed_script=""
sed_script+="s/auto /ğŸš— /g;"
sed_script+="s/\{auto /\{ğŸš— /g;"
sed_script+="s/break;/ğŸ’¥;/g;"
sed_script+="s/\{break;/\{ğŸ’¥;/g;"
sed_script+="s/case /ğŸ§ /g;"
sed_script+="s/\{case /\{ğŸ§ /g;"
sed_script+="s/char /ğŸª‘ /g;"
sed_script+="s/\(char /\(ğŸª‘ /g;"
sed_script+="s/\{char /\{ğŸª‘ /g;"
sed_script+="s/<char>/<ğŸª‘>/g;"
sed_script+="s/int /ğŸ¤¤ /g;"
sed_script+="s/\(int /\(ğŸ¤¤ /g;"
sed_script+="s/\{int /\{ğŸ¤¤ /g;"
sed_script+="s/<int>/<ğŸ¤¤>/g;"
sed_script+="s/const /ğŸ—¿ /g;"
sed_script+="s/\{const /\{ğŸ—¿ /g;"
sed_script+="s/continue;/ğŸ˜;/g;"
sed_script+="s/\{continue;/\{ğŸ˜;/g;"
sed_script+="s/default:/ğŸ¥±:/g;"
sed_script+="s/\{default:/\{ğŸ¥±:/g;"
sed_script+="s/do /ğŸ«¡ /g;"
sed_script+="s/do\{/ğŸ«¡\{/g;"
sed_script+="s/double /ğŸ˜³ /g;"
sed_script+="s/\(double /\(ğŸ˜³ /g;"
sed_script+="s/\{double /\{ğŸ˜³ /g;"
sed_script+="s/<double>/<ğŸ˜³>/g;"
sed_script+="s/else / ğŸ¤· /g;"
sed_script+="s/else\{/ğŸ¤·\{/g;"
sed_script+="s/\}else\{/\}ğŸ¤·\{/g;"
sed_script+="s/enum /ğŸ˜Œ /g;"
sed_script+="s/\{enum /\{ğŸ˜Œ /g;"
sed_script+="s/extern /ğŸ¤¯ /g;"
sed_script+="s/\{extern /\{ğŸ¤¯ /g;"
sed_script+="s/float /ğŸš¢ /g;"
sed_script+="s/\(float /\(ğŸš¢ /g;"
sed_script+="s/\{float /\{ğŸš¢ /g;"
sed_script+="s/<float>/<ğŸš¢>/g;"
sed_script+="s/for /ğŸ¤­ /g;"
sed_script+="s/for\{/ğŸ¤­\{/g;"
sed_script+="s/\}for\{/\}ğŸ¤­\{/g;"
sed_script+="s/goto /ğŸš¶â€â™€ï¸ /g;"

# Convert C ğŸ‘´ files to CğŸ’¯ files ğŸ˜±ğŸ¤˜
for file in "$@"
do
  sed -E "$sed_script" "$file" > "$file"ğŸ’¯
done
